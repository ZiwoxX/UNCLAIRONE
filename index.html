<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#050914">
  <meta name="description" content="Portal Kelas 10 C.1 - Keluarga Besar Makassar">
  <title>UNCLAIRONE | The Royal Phinisi</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cormorant+Garamond:ital,wght@0,300;0,600;1,400&family=Plus+Jakarta+Sans:wght@200;400;500;700&display=swap" rel="stylesheet">

  <style>
    /* ========================================
    1. CORE VARIABLES & RESET
    ========================================
    */
    :root {
        --c-void: #020408;
        --c-depth: #0a1124;
        --c-gold-1: #bf953f;
        --c-gold-2: #fcf6ba;
        --c-gold-3: #b38728;
        --c-maroon: #720e1e;
        --c-maroon-glow: #ff2a4d;
        --c-text-main: #e2e8f0;
        --c-text-muted: #94a3b8;
        --glass-bg: rgba(15, 23, 42, 0.6);
        --glass-border: 1px solid rgba(255, 255, 255, 0.08);
        --ease-out: cubic-bezier(0.215, 0.61, 0.355, 1);
        --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    *, *::before, *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        -webkit-font-smoothing: antialiased;
    }

    body {
        background-color: var(--c-void);
        color: var(--c-text-main);
        font-family: 'Plus Jakarta Sans', sans-serif;
        overflow-x: hidden;
        min-height: 100vh;
        position: relative;
    }

    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--c-void); }
    ::-webkit-scrollbar-thumb { 
        background: linear-gradient(to bottom, var(--c-gold-3), var(--c-maroon)); 
        border-radius: 10px; 
        border: 2px solid var(--c-void);
    }

    /* ========================================
    2. NAVIGATION BUTTONS
    ========================================
    */
    .nav-btn {
        position: fixed;
        top: 30px;
        z-index: 2000;
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 30px;
        background: rgba(15, 23, 42, 0.6);
        border: 1px solid var(--c-gold-3);
        border-radius: 50px;
        color: var(--c-text-main);
        text-decoration: none;
        font-family: 'Cinzel Decorative', cursive;
        font-size: 0.9rem;
        letter-spacing: 1px;
        backdrop-filter: blur(10px);
        transition: all 0.3s var(--ease-out);
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .nav-btn:hover {
        background: var(--c-gold-1);
        color: #000;
        transform: translateY(-3px);
        box-shadow: 0 0 20px rgba(191, 149, 63, 0.5);
        border-color: #fff;
    }

    .nav-left { left: 40px; }
    .nav-right { right: 40px; }

    @media (max-width: 768px) {
        .nav-btn { top: 20px; padding: 8px 15px; font-size: 0.75rem; gap: 5px; }
        .nav-left { left: 15px; }
        .nav-right { right: 15px; }
        .nav-btn span { display: none; } 
    }

    /* ========================================
    3. ANIMATIONS & LOADERS (UPDATED FOR LOGO)
    ========================================
    */
    @keyframes shine { 0% { background-position: -200% center; } 100% { background-position: 200% center; } }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(191, 149, 63, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(191, 149, 63, 0); } 100% { box-shadow: 0 0 0 0 rgba(191, 149, 63, 0); } }
    @keyframes rotate-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes lockPulse { 0% { transform: scale(1); text-shadow: 0 0 20px var(--c-gold-1); } 50% { transform: scale(1.1); text-shadow: 0 0 40px var(--c-gold-2); } 100% { transform: scale(1); text-shadow: 0 0 20px var(--c-gold-1); } }

    /* NEW: Animasi Mengapung untuk Logo */
    @keyframes floatWater {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-15px); }
        100% { transform: translateY(0px); }
    }

    /* Loader Screen */
    #loader {
        position: fixed; inset: 0; z-index: 9999;
        background: var(--c-void);
        display: flex; flex-direction: column;
        justify-content: center; align-items: center;
        transition: opacity 0.8s ease;
    }
    
    /* GAYA LOGO BARU (MENGGANTIKAN DIAMOND) */
/* GAYA LOGO BARU: MEDALI KERAJAAN (BULAT & EMAS) */
    .loader-logo {
        width: 130px;           /* Ukuran sedikit diperbesar */
        height: 130px;          /* Tinggi disamakan agar jadi bulat sempurna */
        object-fit: cover;      /* Memastikan gambar mengisi lingkaran tanpa gepeng */
        border-radius: 50%;     /* INI YANG MEMBUATNYA JADI BULAT */
        border: 5px solid var(--c-gold-1); /* Menambahkan bingkai emas tebal */
        background-color: var(--c-depth);  /* Warna latar belakang jika gambar transparan */
        box-shadow: 
            0 0 30px rgba(191, 149, 63, 0.6), /* Cahaya emas luar (Glow) */
            inset 0 0 20px rgba(0, 0, 0, 0.5); /* Bayangan dalam agar terlihat timbul (3D) */
        animation: floatWater 3s ease-in-out infinite; /* Tetap gunakan animasi mengapung */
        margin-bottom: 25px;
    }

    .loader-text {
        font-family: 'Cinzel Decorative', cursive;
        color: var(--c-gold-2);
        letter-spacing: 5px;
        font-size: 1.5rem;
        animation: float 2s ease-in-out infinite;
    }

    /* Canvas Background */
    #canvas-bg {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 0; pointer-events: none; opacity: 0.6;
    }
    .vignette {
        position: fixed; inset: 0; z-index: 1; pointer-events: none;
        background: radial-gradient(circle at center, transparent 0%, var(--c-void) 120%);
    }
    .ornament-corner {
        position: fixed; width: 300px; height: 300px; z-index: 1; opacity: 0.1;
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 0 L100 50 L50 100 L0 50 Z' fill='none' stroke='%23bf953f' stroke-width='1'/%3E%3C/svg%3E");
        mask-image: radial-gradient(black, transparent 70%);
    }
    .oc-tl { top: -100px; left: -100px; transform: rotate(0deg); }
    .oc-br { bottom: -100px; right: -100px; transform: rotate(180deg); }

    /* ========================================
    4. HEADER
    ========================================
    */
    .main-wrapper {
        position: relative; z-index: 10;
        width: 100%; max-width: 1400px; margin: 0 auto;
        padding: 0 20px 100px;
    }
    header {
        height: 100vh;
        display: flex; flex-direction: column;
        justify-content: center; align-items: center;
        text-align: center;
        position: relative;
    }
    .royal-badge {
        font-family: 'Cinzel Decorative', cursive;
        color: var(--c-gold-1);
        border: 1px solid var(--c-gold-3);
        padding: 10px 30px;
        border-radius: 50px;
        font-size: 0.9rem;
        letter-spacing: 3px;
        background: rgba(191, 149, 63, 0.1);
        backdrop-filter: blur(5px);
        margin-bottom: 30px;
        opacity: 0; animation: fadeInUp 1s forwards 0.5s;
    }
    h1.mega-title {
        font-family: 'Cinzel Decorative', cursive;
        font-size: clamp(3rem, 10vw, 8rem);
        line-height: 1; margin: 0;
        background: linear-gradient(to bottom, var(--c-gold-2), var(--c-gold-1), var(--c-gold-3));
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        opacity: 0; animation: fadeInUp 1s forwards 0.8s;
        position: relative;
    }
    h1.mega-title::after {
        content: attr(data-text);
        position: absolute; left: 0; top: 0; width: 100%; height: 100%;
        background: linear-gradient(45deg, transparent 45%, #fff 50%, transparent 55%);
        background-size: 200%;
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        animation: shine 5s infinite linear; opacity: 0.5;
    }
    .subtitle {
        font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; color: var(--c-text-muted);
        margin-top: 20px; font-style: italic;
        opacity: 0; animation: fadeInUp 1s forwards 1.1s;
    }
    .scroll-indicator {
        position: absolute; bottom: 50px; color: var(--c-gold-3); font-size: 2rem;
        animation: float 2s infinite; cursor: pointer;
        opacity: 0; animation: fadeInUp 1s forwards 1.5s, float 2s infinite;
    }

    /* ========================================
    5. DASHBOARD
    ========================================
    */
    .section-title {
        text-align: center; margin: 80px 0 40px; position: relative;
    }
    .section-title h2 {
        font-family: 'Cinzel Decorative'; font-size: 2.5rem; color: var(--c-text-main); margin-bottom: 10px;
    }
    .section-title span {
        display: block; width: 80px; height: 3px;
        background: linear-gradient(90deg, transparent, var(--c-gold-1), transparent); margin: 0 auto;
    }

    .bento-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 25px; margin-bottom: 80px;
    }

    .bento-card {
        background: var(--glass-bg);
        border: var(--glass-border);
        border-radius: 20px; padding: 30px;
        position: relative; overflow: hidden;
        transition: 0.4s var(--ease-out);
        display: flex; flex-direction: column; justify-content: center;
        backdrop-filter: blur(12px);
        box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
    }
    .bento-card:hover {
        transform: translateY(-5px); border-color: var(--c-gold-3);
        box-shadow: 0 20px 50px -10px rgba(191, 149, 63, 0.15);
        background: rgba(20, 28, 48, 0.8);
    }

    /* Quote Banner */
    .b-quote { 
        grid-column: span 3; min-height: 220px;
        border-left: 5px solid var(--c-gold-1);
        background: linear-gradient(90deg, rgba(11, 16, 26, 0.9), rgba(114, 14, 30, 0.15));
        display: flex; flex-direction: row; align-items: center; justify-content: center;
        padding: 0 60px; text-align: center;
    }
    .q-icon-floating {
        font-size: 8rem; position: absolute; top: -20px; left: 20px;
        color: var(--c-gold-1); opacity: 0.1; font-family: 'Cinzel Decorative';
    }
    .q-text { 
        font-family: 'Cormorant Garamond'; font-size: 2.2rem; font-style: italic; 
        line-height: 1.3; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.8);
    }
    .q-author { 
        margin-top: 25px; color: var(--c-gold-1); font-weight: 700; 
        letter-spacing: 4px; text-transform: uppercase; font-size: 0.9rem;
        display: inline-block; border-bottom: 1px solid var(--c-maroon); padding-bottom: 5px;
    }

    /* Stats Box */
    .b-stat { 
        grid-column: span 1; min-height: 180px; text-align: center;
        border-top: 1px solid rgba(255,255,255,0.05);
    }
    .stat-icon-circle {
        width: 60px; height: 60px; margin: 0 auto 15px;
        background: rgba(191, 149, 63, 0.1); border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-size: 1.8rem; color: var(--c-gold-1);
        border: 1px solid rgba(191, 149, 63, 0.2);
        box-shadow: 0 0 15px rgba(191, 149, 63, 0.1);
    }
    .stat-val { 
        font-size: 3rem; font-family: 'Cinzel Decorative'; color: #fff; line-height: 1;
        text-shadow: 0 0 10px rgba(255,255,255,0.3);
    }
    .stat-lbl { 
        color: var(--c-text-muted); text-transform: uppercase; letter-spacing: 2px; 
        font-size: 0.75rem; margin-top: 10px; font-weight: 600;
    }

    /* ========================================
    6. RUNNING QUOTES
    ========================================
    */
    .running-quotes-wrapper {
        width: 100%;
        overflow-x: hidden;
        margin-bottom: 80px;
        padding: 30px 0;
        background: rgba(0, 0, 0, 0.3);
        border-top: 1px solid var(--c-gold-3);
        border-bottom: 1px solid var(--c-gold-3);
        position: relative;
    }

    .running-track {
        display: flex;
        width: max-content;
        padding-left: 20px;
        gap: 30px;
        cursor: grab;
    }
    .running-track:active {
        cursor: grabbing;
    }

    .student-quote-card {
        background: var(--glass-bg);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 20px;
        min-width: 300px;
        max-width: 320px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: 0.3s var(--ease-out);
        position: relative;
        backdrop-filter: blur(5px);
    }

    .student-quote-card:hover {
        background: rgba(191, 149, 63, 0.1);
        border-color: var(--c-gold-1);
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .sq-icon {
        font-size: 1.5rem;
        color: var(--c-gold-3);
        margin-bottom: 10px;
        font-family: 'Cinzel Decorative';
    }

    .sq-text {
        font-family: 'Cormorant Garamond', serif;
        font-size: 1.1rem;
        color: #ddd;
        font-style: italic;
        line-height: 1.4;
        margin-bottom: 15px;
    }

    .sq-footer {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 10px;
        border-top: 1px solid rgba(255,255,255,0.1);
        padding-top: 10px;
    }

    .sq-avatar {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        object-fit: cover;
        border: 1px solid var(--c-gold-1);
    }

    .sq-author {
        font-family: 'Cinzel Decorative';
        font-size: 0.8rem;
        color: var(--c-gold-1);
        font-weight: bold;
    }

    /* ========================================
    7. STUDENT GRID
    =======================================
    */
    .search-dock {
        position: sticky; 
        top: 0; 
        z-index: 50; 
        display: flex; 
        justify-content: center; 
        margin-bottom: 50px;
        padding: 20px 0; 
        background: var(--c-void);
        box-shadow: 0 5px 20px rgba(0,0,0,0.5);
    }
    .search-input-wrapper { position: relative; width: 100%; max-width: 500px; }
    .search-input {
        width: 100%; padding: 15px 50px 15px 25px;
        background: rgba(10, 17, 36, 0.9);
        border: 1px solid var(--c-gold-3); border-radius: 50px;
        color: var(--c-gold-2); font-family: 'Plus Jakarta Sans'; font-size: 1rem;
        backdrop-filter: blur(20px); box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        transition: 0.3s;
    }
    .search-input:focus { outline: none; box-shadow: 0 0 20px rgba(191, 149, 63, 0.3); transform: scale(1.02); }
    .search-icon { position: absolute; right: 25px; top: 50%; transform: translateY(-50%); color: var(--c-gold-1); pointer-events: none; }

    .grid-jewels {
        display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 40px;
    }
    .jewel-card {
        background: linear-gradient(160deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
        border: 1px solid rgba(255,255,255,0.05); border-radius: 30px;
        padding: 40px 20px; position: relative;
        display: flex; flex-direction: column; align-items: center;
        transition: all 0.5s var(--ease-out); overflow: hidden;
    }
    .jewel-card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(90deg, transparent, var(--c-gold-1), transparent); opacity: 0; transition: 0.5s; }
    .jewel-card:hover {
        transform: translateY(-15px); background: rgba(22, 42, 71, 0.3);
        box-shadow: 0 20px 50px rgba(0,0,0,0.6);
    }
    .jewel-card:hover::before { opacity: 1; }

    .avatar-wrapper { position: relative; width: 130px; height: 130px; margin-bottom: 25px; }
    .avatar-ring {
        position: absolute; inset: -5px; border-radius: 50%; border: 1px dashed var(--c-gold-3);
        animation: rotate-slow 20s linear infinite;
    }
    .avatar-img {
        width: 100%; height: 100%; border-radius: 50%; object-fit: cover;
        border: 3px solid rgba(255,255,255,0.1); transition: 0.5s; position: relative; z-index: 2; background: var(--c-depth);
    }
    .jewel-card:hover .avatar-img { border-color: var(--c-gold-1); transform: scale(1.05); }

    .jewel-name {
        font-family: 'Cinzel Decorative', cursive; font-size: 1.4rem; color: #fff; text-align: center; margin-bottom: 5px;
    }
    .jewel-role {
        font-size: 0.8rem; color: var(--c-maroon-glow); font-weight: 700; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px;
    }
    .jewel-desc {
        text-align: center; color: var(--c-text-muted); font-size: 0.9rem; line-height: 1.6;
        display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
    }
    .btn-detail {
        margin-top: 20px; background: transparent; border: 1px solid var(--c-gold-3); color: var(--c-gold-3);
        padding: 10px 25px; border-radius: 30px; font-family: 'Cinzel Decorative';
        cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 10px;
    }
    .btn-detail:hover { background: var(--c-gold-1); color: #000; box-shadow: 0 0 20px rgba(191, 149, 63, 0.4); }

    /* ========================================
    8. MODALS & INTERACTION
    ========================================
    */
    .modal-overlay {
        position: fixed; inset: 0; z-index: 1000;
        background: rgba(0,0,0,0.9); backdrop-filter: blur(15px);
        opacity: 0; visibility: hidden; transition: 0.5s;
        display: flex; justify-content: center; align-items: center;
    }
    .modal-overlay.active { opacity: 1; visibility: visible; }

    .royal-modal {
        width: 95%; max-width: 900px; height: 85vh; background: #0b101a;
        border: 1px solid var(--c-gold-3); border-radius: 20px;
        display: grid; grid-template-columns: 300px 1fr; overflow: hidden;
        box-shadow: 0 0 100px rgba(191, 149, 63, 0.15);
        transform: scale(0.9); transition: 0.5s var(--ease-elastic);
    }
    .modal-overlay.active .royal-modal { transform: scale(1); }

    .m-sidebar {
        background: linear-gradient(180deg, #162235 0%, #05080e 100%);
        padding: 40px 20px; display: flex; flex-direction: column; align-items: center; text-align: center;
        border-right: 1px solid rgba(255,255,255,0.05);
    }
    .m-avatar-large {
        width: 150px; height: 150px; border-radius: 50%; border: 4px solid var(--c-gold-1);
        margin-bottom: 20px; object-fit: cover; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    .m-name { font-family: 'Cinzel Decorative'; font-size: 1.8rem; color: var(--c-gold-2); margin-bottom: 5px; line-height: 1.2; }
    .m-tag { background: var(--c-maroon); color: #fff; padding: 5px 15px; border-radius: 20px; font-size: 0.7rem; font-weight: 700; margin-bottom: 20px; }

    .m-stats-row {
        display: flex;
        justify-content: center;
        gap: 20px;
        width: 100%;
        margin: 15px 0;
        padding: 10px 0;
        border-top: 1px solid rgba(255,255,255,0.1);
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .ms-item {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    
    .ms-val {
        font-family: 'Cinzel Decorative';
        font-size: 1.1rem;
        color: #fff;
    }
    
    .ms-lbl {
        font-size: 0.7rem;
        color: var(--c-text-muted);
        text-transform: uppercase;
        margin-top: 2px;
    }

    .m-content { display: flex; flex-direction: column; height: 100%; background: #0b101a; }
    .m-tabs { display: flex; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .tab-btn {
        flex: 1; background: transparent; border: none; color: #666; padding: 20px;
        font-family: 'Cinzel Decorative'; cursor: pointer; transition: 0.3s; border-bottom: 3px solid transparent;
    }
    .tab-btn.active { color: var(--c-gold-1); border-bottom-color: var(--c-gold-1); }
    .tab-panel { flex: 1; padding: 30px; overflow-y: auto; display: none; animation: fadeInUp 0.5s; }
    .tab-panel.active { display: block; }

    .info-list { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .il-item h4 { font-size: 0.7rem; color: var(--c-text-muted); margin-bottom: 5px; }
    .il-item p { font-size: 1.1rem; color: #fff; font-family: 'Cormorant Garamond'; }

    .chat-box { background: rgba(0,0,0,0.3); border-radius: 10px; padding: 15px; height: 300px; overflow-y: auto; margin-bottom: 15px; }
    .chat-bubble { margin-bottom: 10px; padding: 10px; border-radius: 8px; background: rgba(255,255,255,0.05); border-left: 2px solid var(--c-gold-3); }
    .cb-user { color: var(--c-gold-1); font-size: 0.8rem; font-weight: bold; }
    .cb-txt { color: #ddd; font-size: 0.9rem; }
    .fancy-input { flex: 1; background: #1a2333; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 8px; width: 100%; }
    .btn-send { background: var(--c-gold-1); color: #000; border: none; padding: 0 20px; border-radius: 8px; font-weight: bold; cursor: pointer; }

    /* Menfess */
    .menfess-container { position: relative; overflow: hidden; padding: 20px 0; }
    .menfess-track { display: flex; gap: 20px; overflow-x: auto; padding-bottom: 20px; scroll-behavior: smooth; }
    .mf-ticket {
        min-width: 300px; background: var(--glass-bg); border-left: 3px solid var(--c-maroon);
        padding: 20px; border-radius: 0 15px 15px 0; transition: 0.3s;
    }
    .mf-ticket:hover { background: rgba(255,255,255,0.05); transform: translateX(5px); }
    .mf-msg { font-style: italic; color: #ccc; line-height: 1.5; font-family: 'Cormorant Garamond'; font-size: 1.2rem; }
    .mf-to { font-family: 'Cinzel Decorative'; color: var(--c-gold-2); font-size: 0.9rem; }

    /* Floating Dock & Widgets */
    .dock-container {
        position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 100;
        display: flex; gap: 20px; align-items: flex-end;
    }
    .dock-item {
        width: 50px; height: 50px; border-radius: 50%; background: rgba(15, 23, 42, 0.8);
        border: 1px solid rgba(255,255,255,0.2); color: #fff; display: flex; justify-content: center; align-items: center;
        backdrop-filter: blur(10px); cursor: pointer; transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.5);
    }
    .dock-item:hover { transform: translateY(-10px) scale(1.2); background: var(--c-gold-1); color: #000; }

    /* === MUSIC WIDGET (SPOTIFY EDITION) === */
    .music-widget {
        position: fixed; bottom: 100px; left: 30px; z-index: 90; background: #0b101a; 
        border: 1px solid var(--c-gold-3);
        width: 320px; padding: 10px; border-radius: 15px; 
        transform: translateX(-150%); transition: 0.5s; 
        box-shadow: 0 0 30px rgba(0,0,0,0.8);
    }
    .music-widget.active { transform: translateX(0); }
    #spotifyEmbedContainer iframe {
        border-radius: 12px;
    }

    /* === ADMIN DASHBOARD STYLING === */
    .admin-login-wrapper {
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        height: 100%; width: 100%; text-align: center;
    }

    .admin-lock-icon {
        font-size: 4rem; color: var(--c-gold-1); margin-bottom: 20px;
        animation: lockPulse 3s infinite;
    }

    .admin-title {
        font-family: 'Cinzel Decorative'; font-size: 1.5rem; color: #fff; 
        margin-bottom: 30px; letter-spacing: 2px;
    }

    /* Header Panel Admin setelah login */
    .admin-header-bar {
        display: flex; justify-content: space-between; align-items: center;
        padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);
        margin-bottom: 20px;
    }

    .btn-logout {
        background: rgba(255, 50, 50, 0.2); color: #ff5555; border: 1px solid #ff5555;
        padding: 5px 15px; border-radius: 20px; cursor: pointer; font-size: 0.8rem;
        transition: 0.3s;
    }
    .btn-logout:hover { background: #ff5555; color: #fff; }

    /* Grid Card untuk Pesan Menfess */
    .admin-list-container {
        display: grid; grid-template-columns: 1fr; gap: 15px;
        max-height: 400px; overflow-y: auto; padding-right: 5px;
    }

    .admin-card-item {
        background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1);
        border-left: 3px solid var(--c-gold-3); border-radius: 8px;
        padding: 15px; display: flex; justify-content: space-between; align-items: flex-start;
        transition: 0.3s;
    }

    .admin-card-item:hover {
        background: rgba(255, 255, 255, 0.06); transform: translateX(5px);
        border-color: var(--c-gold-1);
    }

    .aci-content { flex: 1; margin-right: 15px; }
    .aci-meta {
        font-size: 0.75rem; color: var(--c-gold-3); margin-bottom: 5px;
        font-weight: 700; text-transform: uppercase; display: flex; gap: 10px;
    }
    .aci-text { font-family: 'Cormorant Garamond'; font-size: 1.1rem; color: #ddd; font-style: italic; }

    .btn-delete-icon {
        background: transparent; border: 1px solid #444; color: #666;
        width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
        cursor: pointer; transition: 0.3s; flex-shrink: 0;
    }
    .btn-delete-icon:hover {
        border-color: #ff2a4d; color: #ff2a4d; background: rgba(255, 42, 77, 0.1);
        box-shadow: 0 0 15px rgba(255, 42, 77, 0.4);
    }

    .close-modal-btn { position: absolute; top: 20px; right: 20px; color: #fff; font-size: 2rem; cursor: pointer; z-index: 10; transition: 0.3s; }
    .close-modal-btn:hover { color: var(--c-maroon-glow); transform: rotate(90deg); }

    /* Lightbox Navigation */
    .lb-nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.1);
        color: var(--c-gold-1);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.5rem;
        border: 1px solid var(--c-gold-3);
        transition: all 0.3s;
        user-select: none;
        z-index: 2001;
    }

    .lb-nav-btn:hover {
        background: var(--c-gold-1);
        color: #000;
        box-shadow: 0 0 20px rgba(191, 149, 63, 0.6);
    }

    .lb-nav-btn.prev { left: 20px; }
    .lb-nav-btn.next { right: 20px; }

    @media (max-width: 768px) {
        .lb-nav-btn { width: 40px; height: 40px; font-size: 1rem; background: rgba(0,0,0,0.5); }
        .lb-nav-btn.prev { left: 10px; }
        .lb-nav-btn.next { right: 10px; }
    }

    /* RESPONSIVE LAYOUT FIX (MOBILE) */
    @media (max-width: 900px) {
        .bento-grid { grid-template-columns: 1fr; gap: 15px; }
        .b-quote { grid-column: span 1; padding: 30px 20px; flex-direction: column; text-align: center; }
        .q-text { font-size: 1.5rem; }
        .b-stat { grid-column: span 1; }
        
        /* Modal Profile Responsive */
        .royal-modal { 
            display: flex;
            flex-direction: column;
            overflow-y: auto; 
            height: 90vh;
        }
        
        .m-sidebar { 
            flex-direction: column; /* Stack vertikal */
            padding: 30px 20px; 
            text-align: center; 
            border-right: none; 
            border-bottom: 1px solid rgba(255,255,255,0.1); 
            width: 100%;
        }
        
        .m-avatar-large { 
            width: 100px; 
            height: 100px; 
            margin-bottom: 15px; 
            margin-right: 0;
        }

        .m-content {
            height: auto;
            overflow-y: visible;
        }
    }
  </style>
</head>
<body>

  <a href="https://xcerdas1.vercel.app/" class="nav-btn nav-left">
      <i class="fas fa-home"></i> <span>BERANDA</span>
  </a>
  
  <a href="https://unclairone.vercel.app/prestasi.html" class="nav-btn nav-right">
      <i class="fas fa-trophy"></i> <span>PRESTASI</span>
  </a>

  <div id="loader">
    <img src="image/logo unclairone.png" class="loader-logo" alt="Logo Kelas"> 
    <div class="loader-text">UNCLAIRONE</div>
  </div>

  <canvas id="canvas-bg"></canvas>
  <div class="vignette"></div>
  <div class="ornament-corner oc-tl"></div>
  <div class="ornament-corner oc-br"></div>

  <div class="music-widget" id="musicPlayer">
    <div id="spotifyEmbedContainer">
        </div>
  </div>

  <div class="dock-container">
    <div class="dock-item" onclick="toggleMusic()" title="Musik"><i class="fas fa-music"></i></div>
    <div class="dock-item" onclick="openMenfessModal()" title="Menfess"><i class="fas fa-feather-alt"></i></div>
    <div class="dock-item" onclick="openAdminModal()" title="Admin"><i class="fas fa-user-shield"></i></div>
    <div class="dock-item" onclick="scrollToTop()" title="Ke Atas"><i class="fas fa-arrow-up"></i></div>
  </div>

  <div class="main-wrapper">
    
    <header>
        <div class="royal-badge">FAMILY OF 10 C.1</div>
        <h1 class="mega-title" data-text="UNCLAIRONE">UNCLAIRONE</h1>
        <div class="subtitle">‚ÄúKami bukan yang terbaik, tapi kami selalu memberi yang terbaik.‚Äù</div>
        <div class="scroll-indicator" onclick="scrollToContent()">
            <i class="fas fa-chevron-down"></i>
        </div>
    </header>

    <div class="section-title" id="contentStart">
        <h2>DASHBOARD</h2>
        <span></span>
    </div>

    <div class="bento-grid">
        <div class="bento-card b-quote">
            <div class="q-icon-floating">‚Äú</div>
            <div class="quote-content-wrapper">
                <div class="q-text" id="dailyQuoteText">"Resopa Temmangingngi, Namalomo Naletei Pammase Dewata."</div>
                <div class="q-author" id="dailyAuthor">PEPATAH BUGIS</div>
            </div>
        </div>

        <div class="bento-card b-stat">
            <div class="stat-icon-circle"><i class="fas fa-users"></i></div>
            <span class="stat-val" id="statTotalStudents">0</span>
            <span class="stat-lbl">TOTAL SISWA</span>
        </div>

        <div class="bento-card b-stat">
            <div class="stat-icon-circle"><i class="fas fa-birthday-cake"></i></div>
            <span class="stat-val" id="statBirthdayMonth">0</span>
            <span class="stat-lbl">ULTAH BULAN INI</span>
        </div>

        <div class="bento-card b-stat">
            <div class="stat-icon-circle"><i class="far fa-clock"></i></div>
            <span class="stat-val" id="realTimeClock">00:00</span>
            <span class="stat-lbl">MAKASSAR TIME</span>
        </div>
    </div>

    <div class="section-title">
        <h2>QUOTES</h2>
        <span></span>
    </div>

    <div class="running-quotes-wrapper" id="quoteWrapper">
        <div class="running-track" id="studentQuotesTrack">
            </div>
    </div>
    <div class="section-title">
        <h2>ANGGOTA KELUARGA</h2>
        <span></span>
    </div>

    <div class="search-dock">
        <div class="search-input-wrapper">
            <input type="text" id="searchInput" class="search-input" onkeyup="filterStudents()" placeholder="Cari Saudara (Tabe')...">
            <i class="fas fa-search search-icon"></i>
        </div>
    </div>

    <div class="grid-jewels" id="studentContainer">
        </div>

    <div class="section-title" style="margin-top:150px;">
        <h2>PESAN LONTARA</h2>
        <span></span>
    </div>

    <div class="menfess-container">
        <div class="menfess-track" id="menfessTrack">
            </div>
    </div>

  </div> <div id="studentModalOverlay" class="modal-overlay">
    <div class="royal-modal">
        <span class="close-modal-btn" onclick="closeStudentModal()">√ó</span>
        
        <div class="m-sidebar">
            <img id="mPhoto" src="" class="m-avatar-large">
            <h2 id="mName" class="m-name">Nama Siswa</h2>
            <span class="m-tag" id="mRole">SISWA</span>
            
            <div class="m-stats-row">
                <div class="ms-item">
                    <span class="ms-val" id="likeCountDisplay">0</span>
                    <span class="ms-lbl">Likes</span>
                </div>
                <div class="ms-item">
                    <span class="ms-val">X</span>
                    <span class="ms-lbl">Kelas</span>
                </div>
            </div>
            
             <button id="likeBtnAction" onclick="handleLike()" style="margin-top:20px; background:transparent; border:1px solid var(--c-gold-1); color:var(--c-gold-1); padding:10px 20px; border-radius:30px; cursor:pointer; transition:0.3s;">
                <i id="likeIconAction" class="far fa-heart"></i> Like
            </button>
        </div>

        <div class="m-content">
            <div class="m-tabs">
                <button class="tab-btn active" onclick="switchTab('tab-bio')">Biodata</button>
                <button class="tab-btn" onclick="switchTab('tab-gallery')">Galeri</button>
                <button class="tab-btn" onclick="switchTab('tab-chat')">Komentar</button>
            </div>

            <div id="tab-bio" class="tab-panel active">
                <div class="info-list">
                    <div class="il-item"><h4>UMUR</h4><p id="mAge">16</p></div>
                    <div class="il-item"><h4>HOBI</h4><p id="mHobby">Gaming</p></div>
                    <div class="il-item"><h4>ORGANISASI</h4><p id="mOrg">OSIS</p></div>
                    <div class="il-item"><h4>AGAMA</h4><p id="mRel">Islam</p></div>
                </div>
                <div style="margin-top:30px;">
                    <h4 style="color:var(--c-gold-3); font-size:0.8rem;">QUOTE</h4>
                    <p id="mQuote" style="font-style:italic; font-size:1.2rem; color:#fff; font-family:'Cormorant Garamond'; margin-top:5px;">"..."</p>
                </div>
                <div style="margin-top:20px;">
                    <h4 style="color:var(--c-gold-3); font-size:0.8rem;">DESKRIPSI</h4>
                    <p id="mDesc" class="bio-text">...</p>
                </div>
            </div>

            <div id="tab-gallery" class="tab-panel">
                <div id="mGalleryGrid" style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px;"></div>
                <p id="noGalleryMsg" style="text-align:center; color:#666; margin-top:50px;">Belum ada dokumentasi.</p>
            </div>

            <div id="tab-chat" class="tab-panel">
                <div class="chat-box" id="mChatBox"></div>
                <div class="input-bar" style="display:flex; gap:10px;">
                    <input type="text" id="mCommentInput" class="fancy-input" placeholder="Tulis sesuatu...">
                    <button class="btn-send" onclick="sendComment()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>
  </div>

  <div id="menfessModalOverlay" class="modal-overlay">
    <div class="royal-modal" style="grid-template-columns: 1fr; max-width:500px; height:auto; padding:40px;">
        <span class="close-modal-btn" onclick="closeMenfessModal()">√ó</span>
        <h3 style="text-align:center; font-family:'Cinzel Decorative'; color:var(--c-gold-1); font-size:2rem; margin-bottom:30px;">Kirim Surat</h3>
        <form id="menfessForm" style="display:flex; flex-direction:column; gap:20px;">
            <input type="text" id="mfTo" class="fancy-input" placeholder="Kepada..." required>
            <textarea id="mfContent" class="fancy-input" rows="5" placeholder="Isi pesan rahasia..." required></textarea>
            <input type="text" id="mfFrom" class="fancy-input" placeholder="Dari (Opsional)">
            <button type="submit" class="btn-send" style="padding:15px; width:100%;">KIRIM BURUNG MERPATI</button>
        </form>
    </div>
  </div>

  <div id="adminModalOverlay" class="modal-overlay">
    <div class="royal-modal" style="grid-template-columns: 1fr; max-width:600px; height:auto; min-height:500px; padding:40px;">
        <span class="close-modal-btn" onclick="closeAdminModal()">√ó</span>
        
        <div id="adminLoginSection" class="admin-login-wrapper">
            <i class="fas fa-user-shield admin-lock-icon"></i>
            <h3 class="admin-title">ADMIN AREA</h3>
            <p style="color:#888; margin-bottom:20px; font-size:0.9rem;">Masukkan passwordnya.</p>
            
            <input type="password" id="adminPass" class="fancy-input" 
                   style="margin-bottom:20px; text-align:center; letter-spacing:5px; font-size:1.2rem;" 
                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            
            <button onclick="loginAdmin()" class="btn-send" style="width:100%; padding:15px;">
                <i class="fas fa-key"></i> Masuk!
            </button>
        </div>

        <div id="adminPanel" style="display:none; width:100%;">
            <div class="admin-header-bar">
                <h3 style="color:var(--c-gold-1); font-family:'Cinzel Decorative'; margin:0;">
                    <i class="fas fa-database"></i> DATA MENFESS
                </h3>
                <button onclick="logoutAdmin()" class="btn-logout">KELUAR</button>
            </div>
            
            <div id="adminList" class="admin-list-container">
                </div>
        </div>

    </div>
  </div>

  <div id="lightboxOverlay" class="modal-overlay" style="z-index:2000; background:rgba(0,0,0,0.98);">
      <span class="close-modal-btn" onclick="closeLightbox()">√ó</span>
      
      <div class="lb-nav-btn prev" onclick="changeLightboxImage(-1)"><i class="fas fa-chevron-left"></i></div>
      <div class="lb-nav-btn next" onclick="changeLightboxImage(1)"><i class="fas fa-chevron-right"></i></div>
      
      <img id="lbImg" src="" style="max-width:90%; max-height:80vh; border:2px solid var(--c-gold-1); box-shadow:0 0 50px rgba(191,149,63,0.3); transition: opacity 0.3s;">
      
      <div id="lbCounter" style="position:absolute; bottom:20px; color:var(--c-gold-1); font-family:'Cinzel Decorative';"></div>
  </div>
  
  <div id="birthdayModalOverlay" class="modal-overlay" style="z-index:1100;">
    <div class="royal-modal" style="grid-template-columns: 1fr; max-width:400px; height:auto; padding:40px; text-align:center;">
        <span class="close-modal-btn" onclick="document.getElementById('birthdayModalOverlay').classList.remove('active')">√ó</span>
        <i class="fas fa-crown" style="font-size:3rem; color:var(--c-gold-1); margin-bottom:20px;"></i>
        <h3 style="color:#fff; font-family:'Cinzel Decorative';">SELAMAT ULANG TAHUN</h3>
        <div id="birthdayContent" style="margin:20px 0;"></div>
        <button onclick="document.getElementById('birthdayModalOverlay').classList.remove('active')" class="btn-send">RAYAKAN</button>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

  <script>
    /* ========================================
    A. FIREBASE CONFIG
    ========================================
    */
    const firebaseConfig = {
      apiKey: "AIzaSyAnouQgMTahiA0R3pyKb6n_qHYFhX4tfgU",
      authDomain: "website-25711.firebaseapp.com",
      databaseURL: "https://website-25711-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "website-25711",
      storageBucket: "website-25711.appspot.com",
      messagingSenderId: "38660762483",
      appId: "1:38660762483:web:8f0fa0be46a2e901ceb306",
      measurementId: "G-6VB4PRBFYV"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const db = app.firestore();
    const ADMIN_PW = "admin123";

    /* ========================================
    B. DATASET
    ========================================
    */
    const students = [
      {name: "Ainun Mardiansyah", age: 16, hobby: "Gatahu", instagram: "4inunranii_", photo: "image/Ainun.jpg", religion: "Islam", organization: "Inteens", gallery: [], birthDate: "03-13", description: "Najim hotspott 1", quote: "The best way to predict the future is to create it."},
      {name: "Akifa Naila", age: 16, hobby: "Minta hotspot", instagram: "akiipanaila", photo: "image/Naila.jpg", religion: "Islam", organization: "UNIONE", gallery: [], birthDate: "05-15", description: "Najim hotspot 2", quote: "Every moment is a fresh beginning."},
      {name: "Akil Maula S", age: 16, hobby: "Mancing", instagram: "kikiuuuz", photo: "image/Akil.jpg", religion: "Islam", organization: "SEGA", gallery: [], birthDate: "12-31", description: "Starboy, Cool, Jenius, Proplayer epep", quote: "Know yourself, and be the best of yourself."},
      {name: "Amirah Zafirah", age: 15, hobby: "Yapping", instagram: "amirahpspra", photo: "image/Amirah.jpg", religion: "Islam", organization: "Paskibra", gallery: [], birthDate: "03-22", description: "Duta Yapping", quote: "Appreciate every process, because everything has its time."},
      {name: "Andi Naurah", age: 16, hobby: "Nonton Windah", instagram: "nauurahkhalilah", photo: "image/Naura.jpg", religion: "Islam", organization: "KITS/Sega/Sanggar Seni", gallery: [], birthDate: "04-22", description: "pendek", quote: "What are you so afraid of losing when nothing in this world belongs to you."},
      {name: "Anindya Ainun", age: 15, hobby: "gatau", instagram: "_anindyainun", photo: "image/Ainun purba.jpg", religion: "Islam", organization: "Smansa Voice", gallery: [], birthDate: "03-15", description: "tida mau diambil aibnya", quote: "Love the life you live, live the life you love."},
      {name: "Annisa Maylafaiza", age: 16, hobby: "Minta Hotspots", instagram: "annisamaylaa_", photo: "image/Anisa.jpg", religion: "Islam", organization: "Sanggar Seni", gallery: [], birthDate: "05-05", description: "Najim hotspot 3", quote: "Dont be afraid to try, because every small step brings you closer to your goal"},
      {name: "Aprilia Hastikasari", age: 16, hobby: "Bebeng", instagram: "liaaahyy", photo: "image/April.jpg", religion: "Islam", organization: "Pramuka", gallery: [], birthDate: "04-29", description: "Intropet", quote: "Every day is an opportunity to be the best version of yourself."},
      {name: "Clarinta Amabel", age: 15, hobby: "Gemar Makan Batagor", instagram: "claebell", photo: "image/Aring.jpeg", religion: "Protestan", organization: "KITS/Inteens/Sega/PPKS", gallery: [], birthDate: "03-29", description: "Najim hotspot 4", quote: "The future is not waited for, but is shaped from today."},
      {name: "Dhia Syarafana", age: 16, hobby: "Slowmotion", instagram: "syeradelrey", photo: "image/Dhia.jpg", religion: "Islam", organization: "Tidak Ada", gallery: [], birthDate: "06-06", description: "Mati aja ni orang", quote: "Follow your dreams, not your boyfriends."},
      {name: "Fitri", age: 15, hobby: "yapping", instagram: "ffitri1_", photo: "image/Titi.jpg", religion: "Islam", organization: "Tidak Ada", gallery: [], birthDate: "01-11", description: "Gengster", quote: "Life is a journey, Enjoy the ride."},
      {name: "Hodia", age: 16, hobby: "Nonton Windah", instagram: "odiaa_a", photo: "image/Odi.jpg", religion: "Protestan", organization: "Sega/OSIS/Inteens", gallery: [], birthDate: "08-26", description: "Kakram Lovers", quote: "ùëÜùëùùëíùëéùëò ùëôùëíùë†ùë†, ùíçùíäùíîùíïùíÜùíè ùíéùíêùíìùíÜ. ùëÖùëíùëéùëêùë° ùëôùëíùë†ùë†, ùíêùíÉùíîùíÜùíìùíóùíÜ ùíéùíêùíìùíÜ."},
      {name: "Husnul Khatimah", age: 16, hobby: "Main sama Rasya", instagram: "hsnllkhtmh__", photo: "image/Husnul.jpg", religion: "Islam", organization: "Pramuka", gallery: [], birthDate: "03-17", description: "Misterius", quote: "..."},
      {name: "Miftahul", age: 16, hobby: "Minta Hotspot", instagram: "miftahuljannah1507_", photo: "image/Mita.jpg", religion: "Islam", organization: "Paskibra", gallery: [], birthDate: "07-15", description: "Najim hotspot 5", quote: "Learning is the key to opening the door to succes, make every lesson an opportunity to grow and develop."},
      {name: "Fathur Jibriel", age: 15, hobby: "Basket", instagram: "ndadapateuy", photo: "image/patur.jpg", religion: "Islam", organization: "Basket", gallery: [], birthDate: "", description: "Proplayer emel", quote: "Learn from the past, live in the present, and plan for the future"},
      {name: "Muh.Ibrahim", age: 15, hobby: "Takraw", instagram: "ibe_6610", photo: "image/Ibe.jpg", religion: "Islam", organization: "Paskibra", gallery: [], birthDate: "", description: "Pengganggu mati aja", quote: "Believe in yourself."}, 
      {name: "Muh.Tsaqiff", age: 15, hobby: "Main epep", instagram: "muhtsaqiffal", photo: "image/Tsaqif.jpg", religion: "Islam", organization: "Smansa Voice", gallery: [], birthDate: "", description: "Kul, Proplayer epep", quote: "Don't give up, keep fighting"},
      {name: "Muh.Alif Falah Jordan", age: 15, hobby: "Basket", instagram: "_alipjrdan", photo: "image/Alip.jpg", religion: "Islam", organization: "Basket", gallery: [], birthDate: "", description: "Pro player basket. Sering dipanggil Alip Jordang.", quote: "No pain, no gain."},
      {name: "Muh.Faiz Aswin", age: 15, hobby: "Bewan sama Akil", instagram: "mhmmdfaizz28", photo: "image/Faiz.jpg", religion: "Islam", organization: "Tidak Ada", gallery: [], birthDate: "02-28", description: "Cool, Tampan, Berwibawa, Gantenk, Rival Akil", quote: "There is always a way for those who want to try."},
      {name: "Kink Muflih", age: 15, hobby: "Nonton Anime", instagram: "muflih_zaky", photo: "image/Mupli.jpg", religion: "Islam", organization: "Tidak Ada", gallery: [], birthDate: "", description: "Rapper, Coach ML", quote: "It is obligatory to be good in the eyes of God, it is not necessary to look good in the eyes of humans."},
      {name: "M.Raihaan", age: 15, hobby: "Topup Dm", instagram: "rhnzki_16", photo: "image/Rehan.jpg", religion: "Islam", organization: "Putra Putri Smansa", gallery: [], birthDate: "", description: "Multiteleng", quote: "Character is formed in the stormy waves of the world."},
      {name: "Nagym", age: 15, hobby: "Tidur", instagram: "nagymm_", photo: "image/Nagym.jpg", religion: "Islam", organization: "KITS", gallery: [], birthDate: "06-23", description: "Tidur adalah koentji'.", quote: "Be Yourself And Never Surrender."},
      {name: "Naufal Qawwiy", age: 15, hobby: "Tektok Gn", instagram: "naufalqawiyy", photo: "image/nopal.jpg", religion: "Islam", organization: "Wasipalah", gallery: [], birthDate: "04-23", description: "Setarboy, Multiteleng, Jenius, Anak Gunung", quote: "Believe you can and you're halfway there."},
      {name: "Nur Nadya Afifah", age: 16, hobby: "Mengaji", instagram: "dyaafifah_", photo: "image/Afifah.jpg", religion: "Islam", organization: "Komunitas Pelajar Muslim", gallery: [], birthDate: "", description: "Misterius", quote: "Succes doesn't belong to smart people, succes belongs those who always try"},
      {name: "Nurfadillah Quinsya", age: 16, hobby: "nntndramaeverytaym", instagram: "nurfdilhqsya_", photo: "image/Nyonyo.jpg", religion: "Islam", organization: "Sanggar Seni", gallery: [], birthDate: "", description: "Kenalin ini Nyonyok", quote: "Always be grateful, and keep trying to be better."},
      {name: "Qonitha Cleonima", age: 16, hobby: "Silat", instagram: "qoniitataa", photo: "image/Qoni.jpeg", religion: "Islam", organization: "Paskibra", gallery: [], birthDate: "", description: "Jago bela diri Silat, jangan macam-macam dengannya! anjay", quote: "Don't say you can't before you try."},
      {name: "Rafailah Andini", age: 16, hobby: "Nda tau", instagram: "rafailahandini", photo: "image/dini.jpg", religion: "Islam", organization: "OSIS/PMR", gallery: [], birthDate: "04-02", description: "Misterius", quote: "Brains, beauty, and books."},
      {name: "Raihanah Nadira", age: 16, hobby: "Nonton yutub", instagram: "raihanadiraa", photo: "image/Reihana.jpeg", religion: "Islam", organization: "Sega/Sanggar Seni", gallery: [], birthDate: "", description: "Misterius", quote: "Character is formed in the stormy waves of the world."},
      {name: "Rasya Az'Zahra", age: 16, hobby: "Basket", instagram: "rasya_azzahra", photo: "image/Rasyaa.jpg", religion: "Islam", organization: "Basket", gallery: [], birthDate: "", description: "Misterius", quote: "..."},
      {name: "Aulia", age: 16, hobby: "Menggambar", instagram: "auliaaa_dn", photo: "image/Aul.jpg", religion: "Islam", organization: "Paskibra", gallery: [], birthDate: "", description: "Misterius", quote: "Believe in yourself."},
      {name: "ACOK NI BOS", age: 15, hobby: "anu", instagram: "rrezxkyy30", photo: "image/Aco.jpeg", religion: "Islam", organization: "OSIS/Paskibra", gallery: [], birthDate: "01-30", description: "Cool, Keren, Gantenk, Beraura, Baik, Positip vibes, GrinFleg", quote: "Don't plan too much, some of the most beatiful moments in our lives are actually unplanned."},
      {name: "Syifa BTR", age: 16, hobby: "nda tau", instagram: "syfabhtr_", photo: "image/Cipa.jpg", religion: "Islam", organization: "KITS/Inteens/Sanggar/PPS", gallery: [], birthDate: "09-09", description: "#Bata Out", quote: "Always breathe until you die."},
      {name: "Vanezia", age: 15, hobby: "Menari", instagram: "vvsloav_19", photo: "image/Vanes.jpeg", religion: "Islam", organization: "Sanggar Seni", gallery: [], birthDate: "", description: "Pendek", quote: "There is no such thing as failure in this life, except when you give up when facing trials."},
      {name: "Wilyam", age: 15, hobby: "pegang konde", instagram: "ultraawill", photo: "image/Wilyam.jpg", religion: "Katolik", organization: "Smansa Voice", gallery: [], birthDate: "", description: "Hati-hati dengannya lengah dikit pegang konde", quote: "Stay cool, for sure"},
      {name: "Zahra Mauaja", age: 16, hobby: "Apa yak", instagram: "zhrmdkyya", photo: "image/Yayaa.jpg", religion: "Islam", organization: "Tahfidz", gallery: [], birthDate: "", description: "Zahra mau aja", quote: "Dame ungger? Ungkeh."},
      {name: "Zyqri Al Farezqhi", age: 15, hobby: "main roblox", instagram: "zyqrialfarezqhi18", photo: "image/Zyqri.jpg", religion: "Islam", organization: "KITS/PMR", gallery: [], birthDate: "01-18", description: "Teman Teka Nagym", quote: "Better to fail trying than to regret for doing nothing."},
    ];
    
    const quotesCollection = [
        {text: "The only way to do great work is to love what you do.", author: "Steve Jobs"},
        {text: "Strive not to be a success, but rather to be of value.", author: "Albert Einstein"},
        {text: "Your time is limited, don't waste it living someone else's life.", author: "Steve Jobs"},
        {text: "Change the world by being yourself.", author: "Amy Poehler"},
        {text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt"},
        {text: "It always seems impossible until it is done.", author: "Nelson Mandela"},
        {text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson"},
        {text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill"},
        {text: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis"},
        {text: "Work hard in silence, let your success be your noise.", author: "Frank Ocean"},
        {text: "If you can dream it, you can do it.", author: "Walt Disney"},
        {text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt"},
        {text: "Happiness depends upon ourselves.", author: "Aristotle"},
        {text: "Jangan takut berjalan lambat, takutlah jika hanya berdiri diam.", author: "Pepatah"},
        {text: "Masa depan adalah milik mereka yang menyiapkannya hari ini.", author: "Unknown"},
        {text: "Bermimpilah setinggi langit. Jika engkau jatuh, engkau akan jatuh di antara bintang-bintang.", author: "Ir. Soekarno"},
        {text: "Pendidikan adalah senjata paling ampuh untuk mengubah dunia.", author: "Nelson Mandela"},
        {text: "Barang siapa bersungguh-sungguh, maka dia akan mendapatkan kesuksesan.", author: "Man Jadda Wajada"},
        {text: "Kegagalan hanyalah kesempatan untuk memulai lagi dengan lebih cerdas.", author: "Henry Ford"},
        {text: "Satu-satunya batasan untuk meraih mimpi adalah keragu-raguan kita akan hari ini.", author: "Franklin D. Roosevelt"},
        {text: "Ilmu tanpa amal bagaikan pohon tanpa buah.", author: "Pepatah"},
        {text: "Sahabat sejati adalah ia yang datang saat seluruh dunia pergi.", author: "Walter Winchell"}
    ];

    /* ========================================
    C. CANVAS PARTICLE SYSTEM (Background)
    ========================================
    */
    const canvas = document.getElementById('canvas-bg');
    const ctx = canvas.getContext('2d');
    let particles = [];
    
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Particle {
        constructor() {
            this.reset();
        }
        reset() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 2;
            this.speedX = (Math.random() - 0.5) * 0.5;
            this.speedY = (Math.random() - 0.5) * 0.5;
            this.alpha = Math.random();
            this.glow = Math.random() > 0.9;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
            if(this.alpha > 0) this.alpha -= 0.002;
            else this.reset();
            if(this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) this.reset();
        }
        draw() {
            ctx.fillStyle = this.glow ? 'rgba(255, 215, 0, ' + this.alpha + ')' : 'rgba(255, 255, 255, ' + (this.alpha * 0.5) + ')';
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
            if(this.glow) {
                ctx.shadowBlur = 10; ctx.shadowColor = "gold"; ctx.fill(); ctx.shadowBlur = 0;
            }
        }
    }

    function initParticles() {
        for(let i=0; i<100; i++) particles.push(new Particle());
    }
    function animateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animateParticles);
    }
    initParticles();
    animateParticles();

    /* ========================================
    D. CORE LOGIC
    ========================================
    */
    
    // 1. Loading
    window.addEventListener('load', () => {
        setTimeout(() => {
            document.getElementById('loader').style.opacity = '0';
            setTimeout(() => { document.getElementById('loader').style.display = 'none'; }, 800);
        }, 2000); 
        initContent();
    });

    // 2. Initialize
    function initContent() {
        renderStudents();
        renderStats();
        renderDailyQuote();
        renderRunningQuotes();
        loadMenfess();
        initSpotifyPlayer(); // Init music
        // Check Birthday
        const today = new Date();
        const m = String(today.getMonth()+1).padStart(2,'0');
        const d = String(today.getDate()).padStart(2,'0');
        const bdayKids = students.filter(s => s.birthDate === `${m}-${d}`);
        if(bdayKids.length > 0) {
             const bdayDiv = document.getElementById('birthdayContent');
             bdayKids.forEach(k => {
                 bdayDiv.innerHTML += `<div><img src="${k.photo}" style="width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid gold;margin:10px auto;"><h4 style="color:gold">${k.name}</h4></div>`;
             });
             document.getElementById('birthdayModalOverlay').classList.add('active');
        }
    }

    // --- REAL TIME CLOCK ---
    function updateClock() {
        const now = new Date();
        const h = String(now.getHours()).padStart(2, '0');
        const m = String(now.getMinutes()).padStart(2, '0');
        const clockEl = document.getElementById('realTimeClock');
        if(clockEl) clockEl.textContent = `${h}:${m}`;
    }
    setInterval(updateClock, 1000);
    updateClock(); // Run immediately

    // 3. Render Students
    function renderStudents() {
        const cont = document.getElementById('studentContainer');
        cont.innerHTML = '';
        students.forEach((s, i) => {
            const el = document.createElement('div');
            el.className = 'jewel-card';
            el.style.opacity = '0';
            el.style.animation = `fadeInUp 0.6s forwards ${i * 0.05}s`;
            el.setAttribute('data-name', s.name);
            el.innerHTML = `
                <div class="avatar-wrapper">
                    <div class="avatar-ring"></div>
                    <img src="${s.photo}" loading="lazy" class="avatar-img">
                </div>
                <h3 class="jewel-name">${s.name}</h3>
                <span class="jewel-role">${s.organization || 'SISWA'}</span>
                <p class="jewel-desc">${s.description}</p>
                <button class="btn-detail" onclick="openStudentModal('${s.name}')">
                    <i class="fas fa-eye"></i> LIHAT PROFIL
                </button>
            `;
            cont.appendChild(el);
            VanillaTilt.init(el, { max: 5, speed: 400, glare: true, "max-glare": 0.1 });
        });
    }

    // 4. Render Stats
    function renderStats() {
        document.getElementById('statTotalStudents').textContent = students.length;
        const today = new Date();
        const m = String(today.getMonth()+1).padStart(2,'0');
        document.getElementById('statBirthdayMonth').textContent = students.filter(s=>s.birthDate && s.birthDate.startsWith(m)).length;
    }
    
    function renderDailyQuote() {
        const idx = new Date().getDay() % quotesCollection.length;
        document.getElementById('dailyQuoteText').textContent = `"${quotesCollection[idx].text}"`;
        document.getElementById('dailyAuthor').textContent = `‚Äî ${quotesCollection[idx].author}`;
    }

    // 5. Search
    window.filterStudents = () => {
        const term = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('.jewel-card').forEach(card => {
            const name = card.querySelector('.jewel-name').textContent.toLowerCase();
            card.style.display = name.includes(term) ? 'flex' : 'none';
        });
    }
    
    // 6. Scroll
    window.scrollToContent = () => document.getElementById('contentStart').scrollIntoView({behavior:'smooth'});
    window.scrollToTop = () => window.scrollTo({top:0, behavior:'smooth'});

    /* ========================================
    E. MODAL LOGIC (Tabs & Data)
    ========================================
    */
    let currentStudent = null;
    let interactionListener = null;

    window.openStudentModal = async (name) => {
        const s = students.find(x => x.name === name);
        if(!s) return;
        currentStudent = s;

        // Populate Bio
        document.getElementById('mPhoto').src = s.photo;
        document.getElementById('mName').textContent = s.name;
        document.getElementById('mRole').textContent = s.organization || 'SISWA';
        document.getElementById('mAge').textContent = s.age;
        document.getElementById('mHobby').textContent = s.hobby;
        document.getElementById('mOrg').textContent = s.organization;
        document.getElementById('mRel').textContent = s.religion;
        document.getElementById('mQuote').textContent = `"${s.quote}"`;
        document.getElementById('mDesc').textContent = s.description;

        // Reset & Switch Tab
        switchTab('tab-bio');

        // Gallery (UPDATED FOR SLIDER)
        const gGrid = document.getElementById('mGalleryGrid');
        gGrid.innerHTML = '';
        let photos = [...s.gallery];
        try {
            const doc = await db.collection('galleries').doc(s.name).get();
            if(doc.exists && doc.data().images) photos = [...photos, ...doc.data().images];
        } catch(e) {}
        
        if(photos.length > 0) {
            document.getElementById('noGalleryMsg').style.display='none';
            // Loop photos and attach click listener for slider
            photos.forEach((src, index) => {
                const img = document.createElement('img');
                img.src = src; 
                img.style.width='100%'; 
                img.style.height='80px'; 
                img.style.objectFit='cover'; 
                img.style.borderRadius='8px'; 
                img.style.cursor='pointer';
                
                // CLICK OPENS SLIDER
                img.onclick = () => openLightboxGallery(photos, index);
                
                gGrid.appendChild(img);
            });
        } else {
            document.getElementById('noGalleryMsg').style.display='block';
        }

        loadInteractions(s.name);
        document.getElementById('studentModalOverlay').classList.add('active');
    };

    window.closeStudentModal = () => {
        document.getElementById('studentModalOverlay').classList.remove('active');
        if(interactionListener) interactionListener(); 
    };

    window.switchTab = (tabId) => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        const index = ['tab-bio','tab-gallery','tab-chat'].indexOf(tabId);
        document.querySelectorAll('.tab-btn')[index].classList.add('active');
        document.getElementById(tabId).classList.add('active');
    };

    function loadInteractions(name) {
        if(interactionListener) interactionListener();
        
        // Check Like
        const likeIcon = document.getElementById('likeIconAction');
        const likeBtn = document.getElementById('likeBtnAction');
        const isLiked = localStorage.getItem(`liked_${name}`);
        if(isLiked) {
             likeIcon.classList.remove('far'); likeIcon.classList.add('fas'); 
             likeBtn.style.background = 'var(--c-gold-1)'; likeBtn.style.color = '#000';
        } else {
             likeIcon.classList.remove('fas'); likeIcon.classList.add('far');
             likeBtn.style.background = 'transparent'; likeBtn.style.color = 'var(--c-gold-1)';
        }

        interactionListener = db.collection('student_interactions').doc(name).onSnapshot(doc => {
            const data = doc.data() || { likes:0, comments: [] };
            document.getElementById('likeCountDisplay').textContent = data.likes;
            
            const box = document.getElementById('mChatBox');
            box.innerHTML = '';
            const cmts = data.comments || [];
            
            if(cmts.length === 0) box.innerHTML = '<p style="text-align:center; color:#666; font-size:0.8rem; margin-top:20px;">Jadilah yang pertama berkomentar.</p>';
            
            cmts.sort((a,b) => a.timestamp - b.timestamp).forEach(c => {
                const bubble = document.createElement('div');
                bubble.className = 'chat-bubble';
                bubble.innerHTML = `<div class="cb-user">${c.user}</div><div class="cb-txt">${c.text}</div>`;
                box.appendChild(bubble);
            });
            box.scrollTop = box.scrollHeight;
        });
    }

    window.handleLike = () => {
        if(!currentStudent) return;
        const name = currentStudent.name;
        const ref = db.collection('student_interactions').doc(name);
        if(localStorage.getItem(`liked_${name}`)) {
            ref.set({ likes: firebase.firestore.FieldValue.increment(-1) }, { merge: true });
            localStorage.removeItem(`liked_${name}`);
            document.getElementById('likeIconAction').classList.replace('fas','far');
             document.getElementById('likeBtnAction').style.background = 'transparent'; 
             document.getElementById('likeBtnAction').style.color = 'var(--c-gold-1)';
        } else {
            ref.set({ likes: firebase.firestore.FieldValue.increment(1) }, { merge: true });
            localStorage.setItem(`liked_${name}`, 'true');
            document.getElementById('likeIconAction').classList.replace('far','fas');
            document.getElementById('likeBtnAction').style.background = 'var(--c-gold-1)'; 
            document.getElementById('likeBtnAction').style.color = '#000';
        }
    }

    window.sendComment = () => {
        if(!currentStudent) return;
        const inp = document.getElementById('mCommentInput');
        const val = inp.value.trim();
        if(val.length < 2) return;
        db.collection('student_interactions').doc(currentStudent.name).set({
            comments: firebase.firestore.FieldValue.arrayUnion({ user: 'Teman', text: val, timestamp: Date.now() })
        }, { merge: true });
        inp.value = '';
    };

    /* ========================================
    F. MENFESS
    ========================================
    */
    function loadMenfess() {
        const track = document.getElementById('menfessTrack');
        db.collection('menfess').orderBy('timestamp','desc').limit(15).onSnapshot(snap => {
            track.innerHTML = '';
            if(snap.empty) { track.innerHTML = '<div style="color:#666; padding:20px;">Belum ada pesan.</div>'; return; }
            snap.forEach(doc => {
                const d = doc.data();
                const ticket = document.createElement('div');
                ticket.className = 'mf-ticket';
                ticket.innerHTML = `
                    <div class="mf-to">To: ${d.to}</div>
                    <div class="mf-msg">"${d.content}"</div>
                    <div class="mf-from">From: ${d.from}</div>
                `;
                track.appendChild(ticket);
            });
        });
    }

    window.openMenfessModal = () => document.getElementById('menfessModalOverlay').classList.add('active');
    window.closeMenfessModal = () => document.getElementById('menfessModalOverlay').classList.remove('active');

    document.getElementById('menfessForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        try {
            await db.collection('menfess').add({
                to: document.getElementById('mfTo').value,
                content: document.getElementById('mfContent').value,
                from: document.getElementById('mfFrom').value || 'Anonim',
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            });
            alert('Surat Terkirim'); closeMenfessModal(); e.target.reset();
        } catch(e) { alert('Gagal mengirim.'); }
    });

    /* ========================================
    G. ADMIN (UPDATED DESIGN)
    ========================================
    */
    window.openAdminModal = () => document.getElementById('adminModalOverlay').classList.add('active');
    
    window.closeAdminModal = () => {
        document.getElementById('adminModalOverlay').classList.remove('active');
        // Reset tampilan ke login saat ditutup agar aman
        setTimeout(() => logoutAdmin(), 500); 
    };
    
    window.loginAdmin = () => {
        const pw = document.getElementById('adminPass').value;
        if(pw === ADMIN_PW) {
            // Efek transisi halus
            document.getElementById('adminLoginSection').style.display='none';
            document.getElementById('adminPanel').style.display='block';
            document.getElementById('adminPanel').style.animation = 'fadeInUp 0.5s forwards';
            renderAdminList();
            document.getElementById('adminPass').value = ''; // Clear password
        } else { 
            // Efek getar jika salah (opsional visual feedback)
            const input = document.getElementById('adminPass');
            input.style.border = '1px solid red';
            setTimeout(() => input.style.border = '1px solid #333', 500);
            alert('Kode Akses Ditolak!'); 
        }
    };

    window.logoutAdmin = () => {
        document.getElementById('adminPanel').style.display='none';
        document.getElementById('adminLoginSection').style.display='flex';
    };
    
    function renderAdminList() {
        const list = document.getElementById('adminList');
        list.innerHTML = '<p style="text-align:center; color:#666;">Memuat data...</p>';
        
        db.collection('menfess').orderBy('timestamp','desc').limit(50).get().then(snap => {
            list.innerHTML = '';
            if(snap.empty) {
                list.innerHTML = '<p style="text-align:center; color:#666; margin-top:50px;">Arsip kosong.</p>';
                return;
            }

            snap.forEach(doc => {
                const d = doc.data();
                // Format Tanggal
                let dateStr = "";
                if(d.timestamp) {
                    const date = d.timestamp.toDate();
                    dateStr = date.toLocaleDateString('id-ID') + ' ' + date.toLocaleTimeString('id-ID').slice(0,5);
                }

                const card = document.createElement('div');
                card.className = 'admin-card-item';
                card.innerHTML = `
                    <div class="aci-content">
                        <div class="aci-meta">
                            <span><i class="fas fa-arrow-right"></i> To: ${d.to}</span>
                            <span style="opacity:0.5;">|</span>
                            <span>${dateStr}</span>
                        </div>
                        <div class="aci-text">"${d.content}"</div>
                        <div style="font-size:0.7rem; color:#666; margin-top:5px;">From: ${d.from}</div>
                    </div>
                    <button class="btn-delete-icon" onclick="deleteMsg('${doc.id}')" title="Hapus Permanen">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                `;
                list.appendChild(card);
            });
        });
    }

    window.deleteMsg = (id) => {
        if(confirm('Apakah Anda yakin ingin membakar surat ini selamanya?')) {
            db.collection('menfess').doc(id).delete().then(() => { 
                renderAdminList(); 
            }).catch(err => alert("Gagal menghapus: " + err));
        }
    };

    /* ========================================
    H. SPOTIFY MUSIC PLAYER
    ========================================
    */
    const spotifyTracks = [
        '1Q7EgiMOuwDcB0PJC6AzON', // The Script - Superheroes
        '5TTGoX70AFrTvuEtqHK37S', // Twenty One Pilots - Stressed Out
        '0mQRgmkyY3S2rtiLVzbhHj', // Imagine Dragons - Believer
        '25x7mK9c5xU2QeD9g2y7eM', // Avicii - The Nights
        '6wYm9uFj3jX4kKjIqS6rV9'  // Coldplay - Viva La Vida
    ];

    function initSpotifyPlayer() {
        const randomId = spotifyTracks[Math.floor(Math.random() * spotifyTracks.length)];
        const container = document.getElementById('spotifyEmbedContainer');
        container.innerHTML = `
            <iframe style="border-radius:12px" 
            src="https://open.spotify.com/embed/track/${randomId}?utm_source=generator&theme=0" 
            width="100%" height="152" frameBorder="0" 
            allowfullscreen="" 
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
            loading="lazy"></iframe>
        `;
    }

    window.toggleMusic = () => document.getElementById('musicPlayer').classList.toggle('active');


    /* ========================================
    I. LIGHTBOX & GALLERY LOGIC (UPDATED WITH SLIDER)
    ========================================
    */
    let currentGalleryImages = [];
    let currentImageIndex = 0;

    // Open Gallery with specific index
    window.openLightboxGallery = (images, startIndex) => {
        if (!images || images.length === 0) return;
        
        currentGalleryImages = images;
        currentImageIndex = startIndex;
        
        updateLightboxContent();
        document.getElementById('lightboxOverlay').classList.add('active');
        document.addEventListener('keydown', handleLightboxKeys);
    };

    function updateLightboxContent() {
        const imgEl = document.getElementById('lbImg');
        const counterEl = document.getElementById('lbCounter');
        
        // Fade effect
        imgEl.style.opacity = '0.5';
        setTimeout(() => {
            imgEl.src = currentGalleryImages[currentImageIndex];
            imgEl.style.opacity = '1';
        }, 150);

        // Update counter text
        if(counterEl) {
            counterEl.textContent = `${currentImageIndex + 1} / ${currentGalleryImages.length}`;
        }
    }

    // Change Image (Next/Prev)
    window.changeLightboxImage = (direction) => {
        currentImageIndex += direction;
        // Loop logic
        if (currentImageIndex >= currentGalleryImages.length) {
            currentImageIndex = 0;
        } else if (currentImageIndex < 0) {
            currentImageIndex = currentGalleryImages.length - 1;
        }
        updateLightboxContent();
    };

    window.closeLightbox = () => {
        document.getElementById('lightboxOverlay').classList.remove('active');
        document.removeEventListener('keydown', handleLightboxKeys);
    };

    function handleLightboxKeys(e) {
        if (e.key === 'ArrowRight') changeLightboxImage(1);
        if (e.key === 'ArrowLeft') changeLightboxImage(-1);
        if (e.key === 'Escape') closeLightbox();
    }

    /* ========================================
    J. RUNNING QUOTES LOGIC
    ========================================
    */
    function renderRunningQuotes() {
        const track = document.getElementById('studentQuotesTrack');
        if (!track) return;

        const activeStudents = students.filter(s => s.quote && s.quote.length > 2);

        track.innerHTML = activeStudents.map(s => `
            <div class="student-quote-card" onclick="openStudentModal('${s.name}')">
                <div class="sq-icon">‚Äú</div>
                <div class="sq-text">"${s.quote}"</div>
                <div class="sq-footer">
                    <span class="sq-author">${s.name.split(' ')[0]}</span>
                    <img src="${s.photo}" class="sq-avatar" loading="lazy">
                </div>
            </div>
        `).join('');

        startAutoScroll();
    }

    let scrollInterval;
    const scrollWrapper = document.getElementById('quoteWrapper');
    
    function startAutoScroll() {
        if (!scrollWrapper) return;
        clearInterval(scrollInterval); 
        
        scrollInterval = setInterval(() => {
            scrollWrapper.scrollLeft += 0.8; 
            if (scrollWrapper.scrollLeft + scrollWrapper.clientWidth >= scrollWrapper.scrollWidth - 1) {
                scrollWrapper.scrollLeft = 0;
            }
        }, 15);
    }

    let isDown = false;
    let startX;
    let scrollLeft;

    if (scrollWrapper) {
        scrollWrapper.addEventListener('mousedown', (e) => {
            isDown = true;
            clearInterval(scrollInterval);
            startX = e.pageX - scrollWrapper.offsetLeft;
            scrollLeft = scrollWrapper.scrollLeft;
        });
        scrollWrapper.addEventListener('mouseleave', () => {
            isDown = false;
            startAutoScroll();
        });
        scrollWrapper.addEventListener('mouseup', () => {
            isDown = false;
            startAutoScroll();
        });
        scrollWrapper.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - scrollWrapper.offsetLeft;
            const walk = (x - startX) * 2;
            scrollWrapper.scrollLeft = scrollLeft - walk;
        });

        scrollWrapper.addEventListener('touchstart', (e) => {
            isDown = true;
            clearInterval(scrollInterval);
            startX = e.touches[0].pageX - scrollWrapper.offsetLeft;
            scrollLeft = scrollWrapper.scrollLeft;
        }, {passive: true});
        
        scrollWrapper.addEventListener('touchend', () => {
            isDown = false;
            startAutoScroll();
        });

        scrollWrapper.addEventListener('touchmove', (e) => {
            if (!isDown) return;
            const x = e.touches[0].pageX - scrollWrapper.offsetLeft;
            const walk = (x - startX) * 2;
            scrollWrapper.scrollLeft = scrollLeft - walk;
        }, {passive: true});
    }
  </script>
</body>
</html>